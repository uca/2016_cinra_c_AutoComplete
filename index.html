<!DOCTYPE html>
<html>
<head>
<title>jQuery JSON Suggest Box Demo</title>

<link rel="stylesheet" href="jsonSuggest.css" type="text/css" />
<link rel="stylesheet" href="BasicStyle.css" type="text/css" />

<script language="JavaScript" src="jquery-1.3.2.min.js"></script>
<script language="JavaScript" src="jquery.jsonSuggest.js"></script>
<script language="JavaScript" src="json2.js"></script>
<script language="JavaScript" src="mstData.js"></script>
<script>

var objMst = [mstData.Shinryokoui, mstData.Iyakuhin, mstData.Shobyo, mstData.Shobyo, mstData.Shobyo ];
var intVal = 0;

function callback(item) {
	alert('選択項目： ¥'' + item.text + '¥'¥n¥n選択コード： ¥'' + item.id + '¥'¥n¥nHere is the full selected JSON object;¥n' + JSON.stringify(item));
}

function setTensuKbn(item) {
	var tensuCode = item.extra;
	$('input#kbnCode1').val(tensuCode.substr(0,4));
	$('input#kbnCode2').val(tensuCode.substr(4,2));
	$('input#kbnCode3').val(tensuCode.substr(6,2));
}

$(function(){
	
	$('input#shinryokoui').jsonSuggest(objMst[0], {minCharacters: 2, maxResults:20 ,onSelect:setTensuKbn});
	
});
	
jQuery(function() {

    $("input[name='shinryokomoku']").click(function(){
		if($(this).attr('checked') == true){
			$(this).parent().css('background-color','#e6b4b4');
		}else{
			$(this).parent().css('background-color','#ffffff');
		}
		return true;
	});


	$("textarea").keyup(function(){
		var counter = $(this).val().length;
		$("#countUp").text(counter);
		if(counter == 0){
			$("#countUp").text("0");
        }
        if(counter >= 30){
            $("#countUp").css("color","#ff0000");
        } else{$("#countUp").css("color","#666666");}
    });
    
    
});

</script>

</head>

<body>
<div class="main_left">

<h3>1.診療行為を入力して下さい</h3>
<div class="shinryokoui">
<input type="text" class="textBox" id="shinryokoui" style="width:260px;" />
</div>

<h3>2.点数表区分番号</h3>
<input type="text" class="kbnCode" id="kbnCode1" readonly="readonly" />
 - 
<input type="text" class="kbnCode" id="kbnCode2" readonly="readonly" />
 - 
<input type="text" class="kbnCode" id="kbnCode3" readonly="readonly" />

</div>
<div class="main_right">

<h3>3.診療項目を選択して下さい</h3>
<div class="shinryokomoku">
<ul>
<li><label><input type="checkbox" name="shinryokomoku" class="chk_shinryokomoku" />初診</label></li>
<li><label><input type="checkbox" name="shinryokomoku" class="chk_shinryokomoku" />再診</label></li>
<li><label><input type="checkbox" name="shinryokomoku" class="chk_shinryokomoku" />医学管理等</label></li>
<li><label><input type="checkbox" name="shinryokomoku" class="chk_shinryokomoku" />在宅医療</label></li>
<li><label><input type="checkbox" name="shinryokomoku" class="chk_shinryokomoku" />投薬</label></li>
<li><label><input type="checkbox" name="shinryokomoku" class="chk_shinryokomoku" />注射</label></li>
<li><label><input type="checkbox" name="shinryokomoku" class="chk_shinryokomoku" />処置</label></li>
<li><label><input type="checkbox" name="shinryokomoku" class="chk_shinryokomoku" />手術</label></li>
<li><label><input type="checkbox" name="shinryokomoku" class="chk_shinryokomoku" />麻酔</label></li>
<li><label><input type="checkbox" name="shinryokomoku" class="chk_shinryokomoku" />検査・病理診断</label></li>
<li><label><input type="checkbox" name="shinryokomoku" class="chk_shinryokomoku" />画像診断</label></li>
<li><label><input type="checkbox" name="shinryokomoku" class="chk_shinryokomoku" />その他</label></li>
<li><label><input type="checkbox" name="shinryokomoku" class="chk_shinryokomoku" />リハビリ</label></li>
<li><label><input type="checkbox" name="shinryokomoku" class="chk_shinryokomoku" />精神科療法</label></li>
<li><label><input type="checkbox" name="shinryokomoku" class="chk_shinryokomoku" />入院</label></li>
</ul>
</div>

<h3>4.補足を入力して下さい(30文字以内)</h3>
<textarea cols="70" rows="5"></textarea>
<p id="countUp">0</p>

</div>
</body>

</html>

